/*! 2021 EISYS, Inc. */

!function(n,o){"object"==typeof o&&(n.onerror=function(e,t,i){n.onerror=null;var s="message:"+e;s+=", url: "+t,s+=", line: "+i,s+=", href: "+location.href,s+=", ua: "+n.navigator.userAgent,o.push({event:"jsError",jsErrorMessage:s})})}(window,"undefined"==typeof dataLayer?[]:dataLayer),function(n){void 0===n.fn.each2&&n.extend(n.fn,{each2:function(e){for(var t=n([0]),i=-1,s=this.length;++i<s&&(t.context=t[0]=this[i])&&!1!==e.call(t[0],i,t););return this}})}(jQuery),function(S,w){"use strict";if(window.Select2===w){var e,t,i,x,o,s,y,n,c={x:0,y:0},r={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case r.LEFT:case r.RIGHT:case r.UP:case r.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case r.SHIFT:case r.CTRL:case r.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return 112<=(e=e.which?e.which:e)&&e<=123}},a={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z"};s=S(document),n=1,x=function(){return n++},s.on("mousemove",function(e){c.x=e.pageX,c.y=e.pageY}),e=z(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(e){var o,t,i,s,n,a=".select2-results";this.opts=e=this.prepareOpts(e),this.id=e.id,e.element.data("select2")!==w&&null!==e.element.data("select2")&&e.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=S("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(e.element.attr("id")||"autogen"+x()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",e.element.attr("title")),this.body=S("body"),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",e.element.attr("style")),this.container.css(O(e.containerCss)),this.container.addClass(O(e.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(O(e.dropdownCssClass)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=o=this.container.find(a),this.search=t=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),this.results.on("mousemove",function(e){c!==w&&c.x===e.pageX&&c.y===e.pageY||S(e.target).trigger("mousemove-filtered",e)}),this.dropdown.on("mousemove-filtered",a,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",a,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",a,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",a,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),i=80,s=this.results,n=v(i,function(e){s.trigger("scroll-debounced",e)}),s.on("scroll",function(e){0<=d(e.target,s.get())&&n(e)}),this.dropdown.on("scroll-debounced",a,this.bind(this.loadMoreIfNeeded)),S(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),S(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),S.fn.mousewheel&&o.mousewheel(function(e,t,i,s){var n=o.scrollTop();0<s&&n-s<=0?(o.scrollTop(0),m(e)):s<0&&o.get(0).scrollHeight-o.scrollTop()+s<=o.height()&&(o.scrollTop(o.get(0).scrollHeight-o.height()),m(e))}),g(t),t.on("keyup-change input paste",this.bind(this.updateResults)),t.on("focus",function(){t.addClass("select2-focused")}),t.on("blur",function(){t.removeClass("select2-focused")}),this.dropdown.on("mouseup",a,this.bind(function(e){0<S(e.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=w,S.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==e.maximumInputLength&&this.search.attr("maxlength",e.maximumInputLength);var r=e.element.prop("disabled");r===w&&(r=!1),this.enable(!r);var l=e.element.prop("readonly");l===w&&(l=!1),this.readonly(l),y=y||function(){var e=S("<div class='select2-measure-scrollbar'></div>");e.appendTo("body");var t={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),t}(),this.autofocus=e.element.prop("autofocus"),e.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",e.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,t=e.data("select2");this.close(),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),t!==w&&(t.container.remove(),t.liveRegion.remove(),t.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),P.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:p(e.attr("locked"),"locked")||p(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(m){var a,e,t,i,b=this;if("select"===(a=m.element).get(0).tagName.toLowerCase()&&(this.select=e=m.element),e&&S.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in m)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),"function"!=typeof(m=S.extend({},{populateResults:function(e,t,p){var f,g=this.opts.id,v=this.liveRegion;(f=function(e,t,i){var s,n,o,a,r,l,c,h,d,u;for(s=0,n=(e=m.sortResults(e,t,p)).length;s<n;s+=1)a=!(r=!0===(o=e[s]).disabled)&&g(o)!==w,l=o.children&&0<o.children.length,(c=S("<li></li>")).addClass("select2-results-dept-"+i),c.addClass("select2-result"),c.addClass(a?"select2-result-selectable":"select2-result-unselectable"),r&&c.addClass("select2-disabled"),l&&c.addClass("select2-result-with-children"),c.addClass(b.opts.formatResultCssClass(o)),c.attr("role","presentation"),(h=S(document.createElement("div"))).addClass("select2-result-label"),h.attr("id","select2-result-label-"+x()),h.attr("role","option"),(u=m.formatResult(o,h,p,b.opts.escapeMarkup))!==w&&(h.html(u),c.append(h)),l&&((d=S("<ul></ul>")).addClass("select2-result-sub"),f(o.children,d,i+1),c.append(d)),c.data("select2-data",o),t.append(c);v.text(m.formatMatches(e.length))})(t,e,0)}},S.fn.select2.defaults,m)).id&&(t=m.id,m.id=function(e){return e[t]}),S.isArray(m.element.data("select2Tags"))){if("tags"in m)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+m.element.attr("id");m.tags=m.element.data("select2Tags")}if(e?(m.query=this.bind(function(s){var e,t,n,i={results:[],more:!1},o=s.term;n=function(e,t){var i;e.is("option")?s.matcher(o,e.text(),e)&&t.push(b.optionToData(e)):e.is("optgroup")&&(i=b.optionToData(e),e.children().each2(function(e,t){n(t,i.children)}),0<i.children.length&&t.push(i))},e=a.children(),this.getPlaceholder()!==w&&0<e.length&&(t=this.getPlaceholderOption())&&(e=e.not(t)),e.each2(function(e,t){n(t,i.results)}),s.callback(i)}),m.id=function(e){return e.id}):"query"in m||("ajax"in m?((i=m.element.data("ajax-url"))&&0<i.length&&(m.ajax.url=i),m.query=T.call(m.element,m.ajax)):"data"in m?m.query=I(m.data):"tags"in m&&(m.query=E(m.tags),m.createSearchChoice===w&&(m.createSearchChoice=function(e){return{id:S.trim(e),text:S.trim(e)}}),m.initSelection===w&&(m.initSelection=function(e,t){var i=[];S(u(e.val(),m.separator)).each(function(){var e={id:this,text:this},t=m.tags;S.isFunction(t)&&(t=t()),S(t).each(function(){if(p(this.id,e.id))return e=this,!1}),i.push(e)}),t(i)}))),"function"!=typeof m.query)throw"query function not defined for Select2 "+m.element.attr("id");if("top"===m.createSearchChoicePosition)m.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===m.createSearchChoicePosition)m.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof m.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return m},monitorSource:function(){var t,e,i=this.opts.element;i.on("change.select2",this.bind(function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),t=this.bind(function(){var e=i.prop("disabled");e===w&&(e=!1),this.enable(!e);var t=i.prop("readonly");t===w&&(t=!1),this.readonly(t),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(O(this.opts.containerCssClass)),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(O(this.opts.dropdownCssClass))}),i.length&&i[0].attachEvent&&i.each(function(){this.attachEvent("onpropertychange",t)}),(e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==w&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new e(function(e){e.forEach(t)}),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var t=S.Event("select2-selecting",{val:this.id(e),object:e});return this.opts.element.trigger(t),!t.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=S.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===w&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===w&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,t,i,s,n,o=this.dropdown,a=this.container.offset(),r=this.container.outerHeight(!1),l=this.container.outerWidth(!1),c=o.outerHeight(!1),h=S(window),d=h.width(),u=h.height(),p=h.scrollLeft()+d,f=h.scrollTop()+u,g=a.top+r,v=a.left,m=g+c<=f,b=a.top-c>=h.scrollTop(),w=o.outerWidth(!1),x=v+w<=p;o.hasClass("select2-drop-above")?(t=!0,!b&&m&&(t=!(i=!0))):(t=!1,!m&&b&&(t=i=!0)),i&&(o.hide(),a=this.container.offset(),r=this.container.outerHeight(!1),l=this.container.outerWidth(!1),c=o.outerHeight(!1),p=h.scrollLeft()+d,f=h.scrollTop()+u,g=a.top+r,x=(v=a.left)+(w=o.outerWidth(!1))<=p,o.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(n=S(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),l<(w=o.outerWidth(!1)+(n.scrollHeight===n.clientHeight?0:y.width))?l=w:w=l,c=o.outerHeight(!1),x=v+w<=p):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(g-=(e=this.body.offset()).top,v-=e.left),x||(v=a.left+this.container.outerWidth(!1)-w),s={left:v,width:l},t?(s.top=a.top-c,s.bottom="auto",this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(s.top=g,s.bottom="auto",this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),s=S.extend(s,O(this.opts.dropdownCss)),o.css(s)},shouldOpen:function(){var e;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(e=S.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),!0)},opening:function(){var s,e=this.containerEventName,t="scroll."+e,i="resize."+e,n="orientationchange."+e;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0==(s=S("#select2-drop-mask")).length&&((s=S(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),s.hide(),s.appendTo(this.body),s.on("mousedown touchstart click",function(e){l(s);var t,i=S("#select2-drop");0<i.length&&((t=i.data("select2")).opts.selectOnBlur&&t.selectHighlighted({noFocus:!0}),t.close(),e.preventDefault(),e.stopPropagation())})),this.dropdown.prev()[0]!==s[0]&&this.dropdown.before(s),S("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),s.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var o=this;this.container.parents().add(window).each(function(){S(this).on(i+" "+t+" "+n,function(e){o.opened()&&o.positionDropdown()})})},close:function(){if(this.opened()){var e=this.containerEventName,t="scroll."+e,i="resize."+e,s="orientationchange."+e;this.container.parents().add(window).each(function(){S(this).off(t).off(i).off(s)}),this.clearDropdownAlignmentPreference(),S("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(S.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return O(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var e,t,i,s,n,o,a,r=this.results;(t=this.highlight())<0||(0!=t?(e=this.findHighlightableChoices().find(".select2-result-label"),s=(i=S(e[t])).offset().top+i.outerHeight(!0),t===e.length-1&&0<(a=r.find("li.select2-more-results")).length&&(s=a.offset().top+a.outerHeight(!0)),(n=r.offset().top+r.outerHeight(!0))<s&&r.scrollTop(r.scrollTop()+(s-n)),(o=i.offset().top-r.offset().top)<0&&"none"!=i.css("display")&&r.scrollTop(r.scrollTop()+o)):r.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var t=this.findHighlightableChoices(),i=this.highlight();-1<i&&i<t.length;){var s=S(t[i+=e]);if(s.hasClass("select2-result-selectable")&&!s.hasClass("select2-disabled")&&!s.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(e){var t,i,s=this.findHighlightableChoices();if(0===arguments.length)return d(s.filter(".select2-highlighted")[0],s.get());e>=s.length&&(e=s.length-1),e<0&&(e=0),this.removeHighlight(),(t=S(s[e])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",t.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(t.text()),(i=t.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var t=S(e.target).closest(".select2-result-selectable");if(0<t.length&&!t.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(t))}else 0==t.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,i=t.find("li.select2-more-results"),s=this.resultsPage+1,n=this,o=this.search.val(),a=this.context;0!==i.length&&i.offset().top-t.offset().top-t.height()<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:s,context:a,matcher:this.opts.matcher,callback:this.bind(function(e){n.opened()&&(n.opts.populateResults.call(this,t,e.results,{term:o,page:s,context:a}),n.postprocessResults(e,!1,!1),!0===e.more?(i.detach().appendTo(t).text(O(n.opts.formatLoadMore,s+1)),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):i.remove(),n.positionDropdown(),n.resultsPage=s,n.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})}))},tokenize:function(){},updateResults:function(i){var e,t,s,n=this.search,o=this.results,a=this.opts,r=this,l=n.val(),c=S.data(this.container,"select2-last-term");if((!0===i||!c||!p(l,c))&&(S.data(this.container,"select2-last-term",l),!0===i||!1!==this.showSearchInput&&this.opened())){s=++this.queryCount;var h=this.getMaximumSelectionSize();if(!(1<=h&&(e=this.data(),S.isArray(e)&&e.length>=h&&_(a.formatSelectionTooBig,"formatSelectionTooBig"))))return n.val().length<a.minimumInputLength?(_(a.formatInputTooShort,"formatInputTooShort")?u("<li class='select2-no-results'>"+O(a.formatInputTooShort,n.val(),a.minimumInputLength)+"</li>"):u(""),void(i&&this.showSearch&&this.showSearch(!0))):void(a.maximumInputLength&&n.val().length>a.maximumInputLength?_(a.formatInputTooLong,"formatInputTooLong")?u("<li class='select2-no-results'>"+O(a.formatInputTooLong,n.val(),a.maximumInputLength)+"</li>"):u(""):(a.formatSearching&&0===this.findHighlightableChoices().length&&u("<li class='select2-searching'>"+O(a.formatSearching)+"</li>"),n.addClass("select2-active"),this.removeHighlight(),(t=this.tokenize())!=w&&null!=t&&n.val(t),this.resultsPage=1,a.query({element:a.element,term:n.val(),page:this.resultsPage,context:null,matcher:a.matcher,callback:this.bind(function(e){var t;s==this.queryCount&&(this.opened()?(this.context=e.context===w?null:e.context,this.opts.createSearchChoice&&""!==n.val()&&(t=this.opts.createSearchChoice.call(r,n.val(),e.results))!==w&&null!==t&&r.id(t)!==w&&null!==r.id(t)&&0===S(e.results).filter(function(){return p(r.id(this),r.id(t))}).length&&this.opts.createSearchChoicePosition(e.results,t),0===e.results.length&&_(a.formatNoMatches,"formatNoMatches")?u("<li class='select2-no-results'>"+O(a.formatNoMatches,n.val())+"</li>"):(o.empty(),r.opts.populateResults.call(this,o,e.results,{term:n.val(),page:this.resultsPage,context:null}),!0===e.more&&_(a.formatLoadMore,"formatLoadMore")&&(o.append("<li class='select2-more-results'>"+r.opts.escapeMarkup(O(a.formatLoadMore,this.resultsPage))+"</li>"),window.setTimeout(function(){r.loadMoreIfNeeded()},10)),this.postprocessResults(e,i),d(),this.opts.element.trigger({type:"select2-loaded",items:e}))):this.search.removeClass("select2-active"))})})));u("<li class='select2-selection-limit'>"+O(a.formatSelectionTooBig,h)+"</li>")}function d(){n.removeClass("select2-active"),r.positionDropdown(),o.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?r.liveRegion.text(o.text()):r.liveRegion.text(r.opts.formatMatches(o.find(".select2-result-selectable").length))}function u(e){o.html(e),d()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var s;(s=this.search)[0]!==document.activeElement&&window.setTimeout(function(){var e,t=s[0],i=s.val().length;s.focus(),(0<t.offsetWidth||0<t.offsetHeight)&&t===document.activeElement&&(t.setSelectionRange?t.setSelectionRange(i,i):t.createTextRange&&((e=t.createTextRange()).collapse(!1),e.select()))},0)},selectHighlighted:function(e){if(this._touchMoved)this.clearTouchMoved();else{var t=this.highlight(),i=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");i?(this.highlight(t),this.onSelect(i,e)):e&&e.noFocus&&this.close()}},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==w?e.text():w)},getPlaceholderOption:function(){if(this.select){var e=this.select.children("option").first();if(this.opts.placeholderOption!==w)return"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===S.trim(e.text())&&""===e.val())return e}},initContainerWidth:function(){var e=function(){var e,t,i,s,n;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"!==this.opts.width&&"resolve"!==this.opts.width)return S.isFunction(this.opts.width)?this.opts.width():this.opts.width;if((e=this.opts.element.attr("style"))!==w)for(s=0,n=(t=e.split(";")).length;s<n;s+=1)if(null!==(i=t[s].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&1<=i.length)return i[1];return"resolve"===this.opts.width?0<(e=this.opts.element.css("width")).indexOf("%")?e:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}.call(this);null!==e&&this.container.css("width",e)}}),t=z(e,{createContainer:function(){return S(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var e,t,i;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(e=this.search.get(0)).createTextRange?((t=e.createTextRange()).collapse(!1),t.select()):e.setSelectionRange&&(i=this.search.val().length,e.setSelectionRange(i,i))),""===this.search.val()&&this.nextSearchTerm!=w&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(S.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){S("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),P.call(this,"selection","focusser")},initContainer:function(){var t,e,i=this.container,s=this.dropdown,n=x();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+n),this.focusser.attr("aria-labelledby","select2-chosen-"+n),this.results.attr("id","select2-results-"+n),this.search.attr("aria-owns","select2-results-"+n),this.focusser.attr("id","s2id_autogen"+n),e=S("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(e.text()).attr("for",this.focusser.attr("id"));var o=this.opts.element.attr("title");this.opts.element.attr("title",o||e.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(S("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled())if(e.which!==r.PAGE_UP&&e.which!==r.PAGE_DOWN)switch(e.which){case r.UP:case r.DOWN:return this.moveHighlight(e.which===r.UP?-1:1),void m(e);case r.ENTER:return this.selectHighlighted(),void m(e);case r.TAB:return void this.selectHighlighted({noFocus:!0});case r.ESC:return this.cancel(e),void m(e)}else m(e)})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==r.TAB&&!r.isControl(e)&&!r.isFunctionKey(e)&&e.which!==r.ESC){if(!1!==this.opts.openOnEnter||e.which!==r.ENTER){if(e.which==r.DOWN||e.which==r.UP||e.which==r.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void m(e)}return e.which==r.DELETE||e.which==r.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(e)):void 0}m(e)}})),g(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(0<=this.opts.minimumResultsForSearch){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){var t;this.isInterfaceEnabled()&&(this.clear(),(t=e).preventDefault(),t.stopImmediatePropagation(),this.close(),this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(e){l(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(S.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(e)})),s.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){m(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(S.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(S.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(S.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var t=this.selection.data("select2-data");if(t){var i=S.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var s=this.getPlaceholderOption();this.opts.element.val(s?s.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==e&&(this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(e){e!==w&&null!==e&&(t.updateSelection(e),t.close(),t.setPlaceholder(),t.nextSearchTerm=t.opts.nextSearchTerm(e,t.search.val()))})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==w&&((e=this.getPlaceholderOption())!==w&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===w||null===this.opts.element.val())},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),s=this;return"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(e,t){var i=e.find("option").filter(function(){return this.selected&&!this.disabled});t(s.optionToData(i))}:"data"in a&&(a.initSelection=a.initSelection||function(e,t){var n=e.val(),o=null;a.query({matcher:function(e,t,i){var s=p(n,a.id(i));return s&&(o=i),s},callback:S.isFunction(t)?function(){t(o)}:S.noop})}),a},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===w?w:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==w){if(this.select&&this.getPlaceholderOption()===w)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,i){var s=0,n=this;if(this.findHighlightableChoices().each2(function(e,t){if(p(n.id(t.data("select2-data")),n.opts.element.val()))return s=e,!1}),!1!==i&&(!0===t&&0<=s?this.highlight(s):this.highlight(0)),!0===t){var o=this.opts.minimumResultsForSearch;0<=o&&this.showSearch(function i(e){var s=0;return S.each(e,function(e,t){t.children?s+=i(t.children):s++}),s}(e.results)>=o)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),S(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(e,t){if(this.triggerSelect(e)){var i=this.opts.element.val(),s=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),p(i,this.id(e))||this.triggerChange({added:e,removed:s})}},updateSelection:function(e){var t,i,s=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),s.empty(),null!==e&&(t=this.opts.formatSelection(e,s,this.opts.escapeMarkup)),t!==w&&s.append(t),(i=this.opts.formatSelectionCssClass(e,s))!==w&&s.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==w&&this.container.addClass("select2-allowclear")},val:function(){var e,t=!1,i=null,s=this,n=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],1<arguments.length&&(t=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return i=s.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),t&&this.triggerChange({added:i,removed:n});else{if(!e&&0!==e)return void this.clear(t);if(this.opts.initSelection===w)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){s.opts.element.val(e?s.id(e):""),s.updateSelection(e),s.setPlaceholder(),t&&s.triggerChange({added:e,removed:n})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var t,i=!1;if(0===arguments.length)return(t=this.selection.data("select2-data"))==w&&(t=null),t;1<arguments.length&&(i=arguments[1]),e?(t=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:t})):this.clear(i)}}),i=z(e,{createContainer:function(){return S(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var l=this.parent.prepareOpts.apply(this,arguments),s=this;return"select"===l.element.get(0).tagName.toLowerCase()?l.initSelection=function(e,t){var i=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){i.push(s.optionToData(t))}),t(i)}:"data"in l&&(l.initSelection=l.initSelection||function(e,o){var a=u(e.val(),l.separator),r=[];l.query({matcher:function(e,t,i){var s=S.grep(a,function(e){return p(e,l.id(i))}).length;return s&&r.push(i),s},callback:S.isFunction(o)?function(){for(var e=[],t=0;t<a.length;t++)for(var i=a[t],s=0;s<r.length;s++){var n=r[s];if(p(i,l.id(n))){e.push(n),r.splice(s,1);break}}o(e)}:S.noop})}),l},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){S("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),P.call(this,"searchContainer","selection")},initContainer:function(){var a,e=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=a=this.container.find(e);var t=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(e){t.search[0].focus(),t.selectChoice(S(this))}),this.search.attr("id","s2id_autogen"+x()),this.search.prev().text(S("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var t=a.find(".select2-search-choice-focus"),i=t.prev(".select2-search-choice:not(.select2-locked)"),s=t.next(".select2-search-choice:not(.select2-locked)"),n=function(e){var t=0,i=0;if("selectionStart"in(e=S(e)[0]))t=e.selectionStart,i=e.selectionEnd-t;else if("selection"in document){e.focus();var s=document.selection.createRange();i=document.selection.createRange().text.length,s.moveStart("character",-e.value.length),t=s.text.length-i}return{offset:t,length:i}}(this.search);if(t.length&&(e.which==r.LEFT||e.which==r.RIGHT||e.which==r.BACKSPACE||e.which==r.DELETE||e.which==r.ENTER)){var o=t;return e.which==r.LEFT&&i.length?o=i:e.which==r.RIGHT?o=s.length?s:null:e.which===r.BACKSPACE?this.unselect(t.first())&&(this.search.width(10),o=i.length?i:s):e.which==r.DELETE?this.unselect(t.first())&&(this.search.width(10),o=s.length?s:null):e.which==r.ENTER&&(o=null),this.selectChoice(o),m(e),void(o&&o.length||this.open())}if((e.which===r.BACKSPACE&&1==this.keydowns||e.which==r.LEFT)&&0==n.offset&&!n.length)return this.selectChoice(a.find(".select2-search-choice:not(.select2-locked)").last()),void m(e);if(this.selectChoice(null),this.opened())switch(e.which){case r.UP:case r.DOWN:return this.moveHighlight(e.which===r.UP?-1:1),void m(e);case r.ENTER:return this.selectHighlighted(),void m(e);case r.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case r.ESC:return this.cancel(e),void m(e)}if(e.which!==r.TAB&&!r.isControl(e)&&!r.isFunctionKey(e)&&e.which!==r.BACKSPACE&&e.which!==r.ESC){if(e.which===r.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),e.which!==r.PAGE_UP&&e.which!==r.PAGE_DOWN||m(e),e.which===r.ENTER&&m(e)}}})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(S.Event("select2-blur"))})),this.container.on("click",e,this.bind(function(e){this.isInterfaceEnabled()&&(0<S(e.target).closest(".select2-search-choice").length||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(S.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",e,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(S.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(e){e!==w&&null!==e&&(t.updateSelection(e),t.close(),t.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),t=this.getMaxSearchWidth();e!==w&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(0<t?t:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=w&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(S.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var t=[],i=[],s=this;S(e).each(function(){d(s.id(this),t)<0&&(t.push(s.id(this)),i.push(this))}),e=i,this.selection.find(".select2-search-choice").remove(),S(e).each(function(){s.addSelectedChoice(this)}),s.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=w&&(this.search.val(e),0<e.length&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=w&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(e){var t,i,s=!e.locked,n=S("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),o=S("<li class='select2-search-choice select2-locked'><div></div></li>"),a=s?n:o,r=this.id(e),l=this.getVal();(t=this.opts.formatSelection(e,a.find("div"),this.opts.escapeMarkup))!=w&&a.find("div").replaceWith("<div>"+t+"</div>"),(i=this.opts.formatSelectionCssClass(e,a.find("div")))!=w&&a.addClass(i),s&&a.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect(S(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),a.data("select2-data",e),a.insertBefore(this.searchContainer),l.push(r),this.setVal(l)},unselect:function(e){var t,i,s=this.getVal();if(0===(e=e.closest(".select2-search-choice")).length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(t=e.data("select2-data")){var n=S.Event("select2-removing");if(n.val=this.id(t),n.choice=t,this.opts.element.trigger(n),n.isDefaultPrevented())return!1;for(;0<=(i=d(this.id(t),s));)s.splice(i,1),this.setVal(s),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}),!0}},postprocessResults:function(e,t,i){var s=this.getVal(),n=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),a=this;n.each2(function(e,t){0<=d(a.id(t.data("select2-data")),s)&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),o.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&!1!==i&&a.highlight(0),!this.opts.createSearchChoice&&0<!n.filter(".select2-result:not(.select2-selected)").length&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&_(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+O(a.opts.formatNoMatches,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-f(this.search)},resizeSearch:function(){var e,t,i,s,n=f(this.search);e=function(e){if(!o){var t=e[0].currentStyle||window.getComputedStyle(e[0],null);(o=S(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:t.fontSize,fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight,letterSpacing:t.letterSpacing,textTransform:t.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),S("body").append(o)}return o.text(e.val()),o.width()}(this.search)+10,t=this.search.offset().left,(s=(i=this.selection.width())-(t-this.selection.offset().left)-n)<e&&(s=i-n),s<40&&(s=i-n),s<=0&&(s=e),this.search.width(Math.floor(s))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:u(e=this.opts.element.val(),this.opts.separator)},setVal:function(e){var t;this.select?this.select.val(e):(t=[],S(e).each(function(){d(this,t)<0&&t.push(this)}),this.opts.element.val(0===t.length?"":t.join(this.opts.separator)))},buildChangeDetails:function(e,t){t=t.slice(0),e=e.slice(0);for(var i=0;i<t.length;i++)for(var s=0;s<e.length;s++)p(this.opts.id(t[i]),this.opts.id(e[s]))&&(t.splice(i,1),0<i&&i--,e.splice(s,1),s--);return{added:t,removed:e}},val:function(e,i){var s,n=this;if(0===arguments.length)return this.getVal();if((s=this.data()).length||(s=[]),!e&&0!==e)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:s}));if(this.setVal(e),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(s,this.data()));else{if(this.opts.initSelection===w)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var t=S.map(e,n.id);n.setVal(t),n.updateSelection(e),n.clearSearch(),i&&n.triggerChange(n.buildChangeDetails(s,n.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],t=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(t.opts.id(S(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,t){var i,s,n=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map(function(){return S(this).data("select2-data")}).get();s=this.data(),e=e||[],i=S.map(e,function(e){return n.opts.id(e)}),this.setVal(i),this.updateSelection(e),this.clearSearch(),t&&this.triggerChange(this.buildChangeDetails(s,this.data()))}}),S.fn.select2=function(){var e,t,i,s,n,o=Array.prototype.slice.call(arguments,0),a=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],r=["opened","isFocused","container","dropdown"],l=["val","data"],c={search:"externalSearch"};return this.each(function(){if(0===o.length||"object"==typeof o[0])(e=0===o.length?{}:S.extend({},o[0])).element=S(this),"select"===e.element.get(0).tagName.toLowerCase()?n=e.element.prop("multiple"):(n=e.multiple||!1,"tags"in e&&(e.multiple=n=!0)),(t=n?new window.Select2.class.multi:new window.Select2.class.single).init(e);else{if("string"!=typeof o[0])throw"Invalid arguments to select2 plugin: "+o;if(d(o[0],a)<0)throw"Unknown method: "+o[0];if(s=w,(t=S(this).data("select2"))===w)return;if(i=o[0],s="container"===i?t.container:"dropdown"===i?t.dropdown:(c[i]&&(i=c[i]),t[i].apply(t,o.slice(1))),0<=d(o[0],r)||0<=d(o[0],l)&&1==o.length)return!1}}),s===w?this:s},S.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,s){var n=[];return C(e.text,i.term,n,s),n.join("")},formatSelection:function(e,t,i){return e?i(e.text):w},sortResults:function(e,t,i){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,t){return w},formatMatches:function(e){return e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" or more character"+(1==i?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results…"},formatSearching:function(){return"Searching…"},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==w?null:e.id},matcher:function(e,t){return 0<=h(""+t).toUpperCase().indexOf(h(""+e).toUpperCase())},separator:",",tokenSeparators:[],tokenizer:function(e,t,i,s){var n,o,a,r,l,c=e,h=!1;if(!s.createSearchChoice||!s.tokenSeparators||s.tokenSeparators.length<1)return w;for(;;){for(o=-1,a=0,r=s.tokenSeparators.length;a<r&&(l=s.tokenSeparators[a],!(0<=(o=e.indexOf(l))));a++);if(o<0)break;if(n=e.substring(0,o),e=e.substring(o+l.length),0<n.length&&(n=s.createSearchChoice.call(this,n,t))!==w&&null!==n&&s.id(n)!==w&&null!==s.id(n)){for(h=!1,a=0,r=t.length;a<r;a++)if(p(s.id(n),s.id(t[a]))){h=!0;break}h||i(n)}}return c!==e?e:void 0},escapeMarkup:k,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,t){return w},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!("ontouchstart"in window||0<navigator.msMaxTouchPoints)||!(e.opts.minimumResultsForSearch<0)}},S.fn.select2.ajaxDefaults={transport:S.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:T,local:I,tags:E},util:{debounce:v,markMatch:C,escapeMarkup:k,stripDiacritics:h},class:{abstract:e,single:t,multi:i}}}function l(e){var t=S(document.createTextNode(""));e.before(t),t.before(e),t.remove()}function h(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return a[e]||e})}function d(e,t){for(var i=0,s=t.length;i<s;i+=1)if(p(e,t[i]))return i;return-1}function p(e,t){return e===t||e!==w&&t!==w&&(null!==e&&null!==t&&(e.constructor===String?e+""==t+"":t.constructor===String&&t+""==e+""))}function u(e,t){var i,s,n;if(null===e||e.length<1)return[];for(s=0,n=(i=e.split(t)).length;s<n;s+=1)i[s]=S.trim(i[s]);return i}function f(e){return e.outerWidth(!1)-e.width()}function g(t){var i="keyup-change-value";t.on("keydown",function(){S.data(t,i)===w&&S.data(t,i,t.val())}),t.on("keyup",function(){var e=S.data(t,i);e!==w&&t.val()!==e&&(S.removeData(t,i),t.trigger("keyup-change"))})}function v(t,i,s){var n;return s=s||w,function(){var e=arguments;window.clearTimeout(n),n=window.setTimeout(function(){i.apply(s,e)},t)}}function m(e){e.preventDefault(),e.stopPropagation()}function b(e,t,i){var s,n,o=[];(s=e.attr("class"))&&S((s=""+s).split(" ")).each2(function(){0===this.indexOf("select2-")&&o.push(this)}),(s=t.attr("class"))&&S((s=""+s).split(" ")).each2(function(){0!==this.indexOf("select2-")&&(n=i(this))&&o.push(n)}),e.attr("class",o.join(" "))}function C(e,t,i,s){var n=h(e.toUpperCase()).indexOf(h(t.toUpperCase())),o=t.length;n<0?i.push(s(e)):(i.push(s(e.substring(0,n))),i.push("<span class='select2-match'>"),i.push(s(e.substring(n,n+o))),i.push("</span>"),i.push(s(e.substring(n+o,e.length))))}function k(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function T(a){var e,r=null,t=a.quietMillis||100,l=a.url,c=this;return function(o){window.clearTimeout(e),e=window.setTimeout(function(){var e=a.data,t=l,i=a.transport||S.fn.select2.ajaxDefaults.transport,s={type:a.type||"GET",cache:a.cache||!1,jsonpCallback:a.jsonpCallback||w,dataType:a.dataType||"json"},n=S.extend({},S.fn.select2.ajaxDefaults.params,s);e=e?e.call(c,o.term,o.page,o.context):null,t="function"==typeof t?t.call(c,o.term,o.page,o.context):t,r&&"function"==typeof r.abort&&r.abort(),a.params&&(S.isFunction(a.params)?S.extend(n,a.params.call(c)):S.extend(n,a.params)),S.extend(n,{url:t,dataType:a.dataType,data:e,success:function(e){var t=a.results(e,o.page);o.callback(t)}}),r=i.call(c,n)},t)}}function I(e){var t,i,s=e,r=function(e){return""+e.text};S.isArray(s)&&(s={results:i=s}),!1===S.isFunction(s)&&(i=s,s=function(){return i});var n=s();return n.text&&(r=n.text,S.isFunction(r)||(t=n.text,r=function(e){return e[t]})),function(n){var o,a=n.term,i={results:[]};""!==a?(o=function(e,t){var i,s;if((e=e[0]).children){for(s in i={},e)e.hasOwnProperty(s)&&(i[s]=e[s]);i.children=[],S(e.children).each2(function(e,t){o(t,i.children)}),(i.children.length||n.matcher(a,r(i),e))&&t.push(i)}else n.matcher(a,r(e),e)&&t.push(e)},S(s().results).each2(function(e,t){o(t,i.results)}),n.callback(i)):n.callback(s())}}function E(t){var o=S.isFunction(t);return function(i){var s=i.term,n={results:[]},e=o?t(i):t;S.isArray(e)&&(S(e).each(function(){var e=this.text!==w,t=e?this.text:this;""!==s&&!i.matcher(s,t)||n.results.push(e?this:{id:this,text:this})}),i.callback(n))}}function _(e,t){if(S.isFunction(e))return 1;if(e){if("string"==typeof e)return 1;throw new Error(t+" must be a string, function, or falsy value")}}function O(e){if(S.isFunction(e)){var t=Array.prototype.slice.call(arguments,1);return e.apply(null,t)}return e}function P(){var t=this;Array.prototype.forEach.call(arguments,function(e){t[e].remove(),t[e]=null})}function z(e,t){function i(){}return((i.prototype=new e).constructor=i).prototype.parent=e.prototype,i.prototype=S.extend(i.prototype,t),i}}(jQuery),function(){var d=jQuery,t=(e.prototype.albumLabel=function(e,t){return e+" / "+t},e);function e(){this.fadeDuration=150,this.fitImagesInViewport=!0,this.resizeDuration=150,this.positionFromTop=50,this.showImageNumberLabel=!0,this.alwaysShowNavOnTouchDevices=!1,this.wrapAround=!1}var i=(s.prototype.init=function(){this.enable(),this.build()},s.prototype.enable=function(){var t=this;d("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(e){return t.start(d(e.currentTarget)),!1})},s.prototype.build=function(){var t=this;d("<div id='lightboxOverlay' class='lightboxOverlay'></div><div id='lightbox' class='lightbox'><div class='lb-outerContainer'><div class='lb-container'><img class='lb-image' src='' /><div class='lb-nav'><a class='lb-prev' href='' ></a><a class='lb-next' href='' ></a></div><div class='lb-loader'><a class='lb-cancel'></a></div></div></div><div class='lb-dataContainer'><div class='lb-data'><div class='lb-details'><span class='lb-caption'></span><span class='lb-number'></span></div><div class='lb-closeContainer'><a class='lb-close'></a></div></div></div></div>").appendTo(d("body")),this.$lightbox=d("#lightbox"),this.$overlay=d("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return t.end(),!1}),this.$lightbox.hide().on("click",function(e){return"lightbox"===d(e.target).attr("id")&&t.end(),!1}),this.$outerContainer.on("click",function(e){return"lightbox"===d(e.target).attr("id")&&t.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===t.currentImageIndex?t.changeImage(t.album.length-1):t.changeImage(t.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return t.currentImageIndex===t.album.length-1?t.changeImage(0):t.changeImage(t.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return t.end(),!1})},s.prototype.start=function(e){var t=this,i=d(window);i.on("resize",d.proxy(this.sizeOverlay,this)),d("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var s=0;function n(e){t.album.push({link:e.attr("href"),title:e.attr("data-title")||e.attr("title")})}var o,a=e.attr("data-lightbox");if(a){o=d(e.prop("tagName")+'[data-lightbox="'+a+'"]');for(var r=0;r<o.length;r=++r)n(d(o[r])),o[r]===e[0]&&(s=r)}else if("lightbox"===e.attr("rel"))n(e);else{o=d(e.prop("tagName")+'[rel="'+e.attr("rel")+'"]');for(var l=0;l<o.length;l=++l)n(d(o[l])),o[l]===e[0]&&(s=l)}var c=i.scrollTop()+this.options.positionFromTop,h=i.scrollLeft();this.$lightbox.css({top:c+"px",left:h+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(s)},s.prototype.changeImage=function(a){var r=this;this.disableKeyboardNav();var l=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),d(".lb-loader").fadeIn("fast"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var c=new Image;c.onload=function(){var e,t,i,s,n,o;l.attr("src",r.album[a].link),d(c),l.width(c.width),l.height(c.height),r.options.fitImagesInViewport&&(o=d(window).width(),n=d(window).height(),s=o-r.containerLeftPadding-r.containerRightPadding-20,i=n-r.containerTopPadding-r.containerBottomPadding-120,(c.width>s||c.height>i)&&(c.width/s>c.height/i?(t=s,e=parseInt(c.height/(c.width/t),10)):(e=i,t=parseInt(c.width/(c.height/e),10)),l.width(t),l.height(e))),r.sizeContainer(l.width(),l.height())},c.src=this.album[a].link,this.currentImageIndex=a},s.prototype.sizeOverlay=function(){this.$overlay.width(d(window).width()).height(d(document).height())},s.prototype.sizeContainer=function(e,t){var i=this,s=this.$outerContainer.outerWidth(),n=this.$outerContainer.outerHeight(),o=e+this.containerLeftPadding+this.containerRightPadding,a=t+this.containerTopPadding+this.containerBottomPadding;function r(){i.$lightbox.find(".lb-dataContainer").width(o),i.$lightbox.find(".lb-prevLink").height(a),i.$lightbox.find(".lb-nextLink").height(a),i.showImage()}s!==o||n!==a?this.$outerContainer.animate({width:o,height:a},this.options.resizeDuration,"swing",function(){r()}):r()},s.prototype.showImage=function(){this.$lightbox.find(".lb-loader").hide(),this.$lightbox.find(".lb-image").fadeIn("fast"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},s.prototype.updateNav=function(){var e=!1;try{document.createEvent("TouchEvent"),e=!!this.options.alwaysShowNavOnTouchDevices}catch(e){}this.$lightbox.find(".lb-nav").show(),1<this.album.length&&(this.options.wrapAround?(e&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(0<this.currentImageIndex&&(this.$lightbox.find(".lb-prev").show(),e&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),e&&this.$lightbox.find(".lb-next").css("opacity","1"))))},s.prototype.updateDetails=function(){var e=this;void 0!==this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(e){location.href=d(this).attr("href")}),1<this.album.length&&this.options.showImageNumberLabel?this.$lightbox.find(".lb-number").text(this.options.albumLabel(this.currentImageIndex+1,this.album.length)).fadeIn("fast"):this.$lightbox.find(".lb-number").hide(),this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return e.sizeOverlay()})},s.prototype.preloadNeighboringImages=function(){this.album.length>this.currentImageIndex+1&&((new Image).src=this.album[this.currentImageIndex+1].link),0<this.currentImageIndex&&((new Image).src=this.album[this.currentImageIndex-1].link)},s.prototype.enableKeyboardNav=function(){d(document).on("keyup.keyboard",d.proxy(this.keyboardAction,this))},s.prototype.disableKeyboardNav=function(){d(document).off(".keyboard")},s.prototype.keyboardAction=function(e){var t=e.keyCode,i=String.fromCharCode(t).toLowerCase();27===t||i.match(/x|o|c/)?this.end():"p"===i||37===t?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&1<this.album.length&&this.changeImage(this.album.length-1):"n"!==i&&39!==t||(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&1<this.album.length&&this.changeImage(0))},s.prototype.end=function(){this.disableKeyboardNav(),d(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),d("select, object, embed").css({visibility:"visible"})},s);function s(e){this.options=e,this.album=[],this.currentImageIndex=void 0,this.init()}d(function(){if(0!==d(".lightbox-img").length){var e=new t;new i(e)}})}.call(this),function(d){d.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var o=document.createElement("div"),u={};function e(e){if(e in o.style)return e;for(var t=["Moz","Webkit","O","ms"],i=e.charAt(0).toUpperCase()+e.substr(1),s=0;s<t.length;++s){var n=t[s]+i;if(n in o.style)return n}}var s=-1<navigator.userAgent.toLowerCase().indexOf("chrome");u.transition=e("transition"),u.transitionDelay=e("transitionDelay"),u.transform=e("transform"),u.transformOrigin=e("transformOrigin"),u.filter=e("Filter"),u.transform3d=(o.style[u.transform]="",o.style[u.transform]="rotateY(90deg)",""!==o.style[u.transform]);var p=u.transitionEnd={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"}[u.transition]||null;for(var t in u)u.hasOwnProperty(t)&&void 0===d.support[t]&&(d.support[t]=u[t]);function n(e){return"string"==typeof e&&this.parse(e),this}function f(e,t,i){!0===t?e.queue(i):t?e.queue(t,i):e.each(function(){i.call(this)})}function g(e,t,i,s){var n,o,a=(n=e,o=[],d.each(n,function(e){e=d.camelCase(e),e=c(e=d.transit.propertyMap[e]||d.cssProps[e]||e),u[e]&&(e=c(u[e])),-1===d.inArray(e,o)&&o.push(e)}),o);d.cssEase[i]&&(i=d.cssEase[i]);var r=v(t)+" "+i;0<parseInt(s,10)&&(r+=" "+v(s));var l=[];return d.each(a,function(e,t){l.push(t+" "+r)}),l.join(", ")}function i(s,e){e||(d.cssNumber[s]=!0),d.transit.propertyMap[s]=u.transform,d.cssHooks[s]={get:function(e){return d(e).css("transit:transform").get(s)},set:function(e,t){var i=d(e).css("transit:transform");i.setFromString(s,t),d(e).css({"transit:transform":i})}}}function c(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function a(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}function v(e){var t=e;return"string"!=typeof t||t.match(/^[\-0-9\.]+/)||(t=d.fx.speeds[t]||d.fx.speeds._default),a(t,"ms")}o=null,d.cssEase={_default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},d.cssHooks["transit:transform"]={get:function(e){return d(e).data("transform")||new n},set:function(e,t){var i=t;i instanceof n||(i=new n(i)),"WebkitTransform"!==u.transform||s?e.style[u.transform]=i.toString():e.style[u.transform]=i.toString(!0),d(e).data("transform",i)}},d.cssHooks.transform={set:d.cssHooks["transit:transform"].set},d.cssHooks.filter={get:function(e){return e.style[u.filter]},set:function(e,t){e.style[u.filter]=t}},d.fn.jquery<"1.8"&&(d.cssHooks.transformOrigin={get:function(e){return e.style[u.transformOrigin]},set:function(e,t){e.style[u.transformOrigin]=t}},d.cssHooks.transition={get:function(e){return e.style[u.transition]},set:function(e,t){e.style[u.transition]=t}}),i("scale"),i("scaleX"),i("scaleY"),i("translate"),i("rotate"),i("rotateX"),i("rotateY"),i("rotate3d"),i("perspective"),i("skewX"),i("skewY"),i("x",!0),i("y",!0),n.prototype={setFromString:function(e,t){var i="string"==typeof t?t.split(","):t.constructor===Array?t:[t];i.unshift(e),n.prototype.set.apply(this,i)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=a(e,"deg")},rotateX:function(e){this.rotateX=a(e,"deg")},rotateY:function(e){this.rotateY=a(e,"deg")},scale:function(e,t){void 0===t&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=a(e,"deg")},skewY:function(e){this.skewY=a(e,"deg")},perspective:function(e){this.perspective=a(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!=e&&(this._translateX=a(e,"px")),null!=t&&(this._translateY=a(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;t<=3;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=a(e[3],"deg")),e}},parse:function(e){var s=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,t,i){s.setFromString(t,i)})},toString:function(e){var t=[];for(var i in this)if(this.hasOwnProperty(i)){if(!u.transform3d&&("rotateX"===i||"rotateY"===i||"perspective"===i||"transformOrigin"===i))continue;"_"!==i[0]&&(e&&"scale"===i?t.push(i+"3d("+this[i]+",1)"):e&&"translate"===i?t.push(i+"3d("+this[i]+",0)"):t.push(i+"("+this[i]+")"))}return t.join(" ")}},d.fn.transition=d.fn.transit=function(n,e,t,o){var a=this,i=0,s=!0,r=jQuery.extend(!0,{},n);"function"==typeof e&&(o=e,e=void 0),"object"==typeof e&&(t=e.easing,i=e.delay||0,s=void 0===e.queue||e.queue,o=e.complete,e=e.duration),"function"==typeof t&&(o=t,t=void 0),void 0!==r.easing&&(t=r.easing,delete r.easing),void 0!==r.duration&&(e=r.duration,delete r.duration),void 0!==r.complete&&(o=r.complete,delete r.complete),void 0!==r.queue&&(s=r.queue,delete r.queue),void 0!==r.delay&&(i=r.delay,delete r.delay),void 0===e&&(e=d.fx.speeds._default),void 0===t&&(t=d.cssEase._default),e=v(e);var l=g(r,e,t,i),c=d.transit.enabled&&u.transition?parseInt(e,10)+parseInt(i,10):0;if(0===c){return f(a,s,function(e){a.css(r),o&&o.apply(a),e&&e()}),a}var h={};return f(a,s,function(e){var t,i,s;this.offsetWidth,t=e,i=!1,s=function(){i&&a.unbind(p,s),0<c&&a.each(function(){this.style[u.transition]=h[this]||null}),"function"==typeof o&&o.apply(a),"function"==typeof t&&t()},0<c&&p&&d.transit.useTransitionEnd?(i=!0,a.bind(p,s)):window.setTimeout(s,c),a.each(function(){0<c&&(this.style[u.transition]=l),d(this).css(n)})}),this},d.transit.getTransitionValue=g}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(f){var s=/\+/g;function g(e){return m.raw?e:encodeURIComponent(e)}function v(e,t){var i=m.raw?e:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(s," ")),m.json?JSON.parse(e):e}catch(e){}}(e);return f.isFunction(t)?t(i):i}var m=f.cookie=function(e,t,i){if(void 0!==t&&!f.isFunction(t)){if("number"==typeof(i=f.extend({},m.defaults,i)).expires){var s=i.expires,n=i.expires=new Date;n.setTime(+n+864e5*s)}return document.cookie=[g(e),"=",(o=t,g(m.json?JSON.stringify(o):String(o))),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var o,a,r=e?void 0:{},l=document.cookie?document.cookie.split("; "):[],c=0,h=l.length;c<h;c++){var d=l[c].split("="),u=(a=d.shift(),m.raw?a:decodeURIComponent(a)),p=d.join("=");if(e&&e===u){r=v(p,t);break}e||void 0===(p=v(p))||(r[u]=p)}return r};m.defaults={},f.removeCookie=function(e,t){return void 0!==f.cookie(e)&&(f.cookie(e,"",f.extend({},t,{expires:-1})),!f.cookie(e))}}),function(j){var W={},q={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onSliderResize:function(){}};j.fn.bxSlider=function(t){if(0==this.length)return this;if(1<this.length)return this.each(function(){j(this).bxSlider(t)}),this;var c={},h=this;W.el=this;function s(){c.settings=j.extend({},q,t),c.settings.slideWidth=parseInt(c.settings.slideWidth),c.children=h.children(c.settings.slideSelector),c.children.length<c.settings.minSlides&&(c.settings.minSlides=c.children.length),c.children.length<c.settings.maxSlides&&(c.settings.maxSlides=c.children.length),c.settings.randomStart&&(c.settings.startSlide=Math.floor(Math.random()*c.children.length)),c.active={index:c.settings.startSlide},c.carousel=1<c.settings.minSlides||1<c.settings.maxSlides,c.carousel&&(c.settings.preloadImages="all"),c.minThreshold=c.settings.minSlides*c.settings.slideWidth+(c.settings.minSlides-1)*c.settings.slideMargin,c.maxThreshold=c.settings.maxSlides*c.settings.slideWidth+(c.settings.maxSlides-1)*c.settings.slideMargin,c.working=!1,c.controls={},c.interval=null,c.animProp="vertical"==c.settings.mode?"top":"left",c.usingCSS=c.settings.useCSS&&"fade"!=c.settings.mode&&function(){var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in t)if(void 0!==e.style[t[i]])return c.cssPrefix=t[i].replace("Perspective","").toLowerCase(),c.animProp="-"+c.cssPrefix+"-transform",!0;return!1}(),"vertical"==c.settings.mode&&(c.settings.maxSlides=c.settings.minSlides),h.data("origStyle",h.attr("style")),h.children(c.settings.slideSelector).each(function(){j(this).data("origStyle",j(this).attr("style"))}),a()}function e(){for(var e="",t=g(),i=0;i<t;i++){var s="";c.settings.buildPager&&j.isFunction(c.settings.buildPager)?(s=c.settings.buildPager(i),c.pagerEl.addClass("bx-custom-pager")):(s=i+1,c.pagerEl.addClass("bx-default-pager")),e+='<div class="bx-pager-item"><a href="" data-slide-index="'+i+'" class="bx-pager-link">'+s+"</a></div>"}c.pagerEl.html(e)}var n=j(window).width(),o=j(window).height(),a=function(){h.wrap('<div class="'+c.settings.wrapperClass+'"><div class="bx-viewport"></div></div>'),c.viewport=h.parent(),c.loader=j('<div class="bx-loading" />'),c.viewport.prepend(c.loader),h.css({width:"horizontal"==c.settings.mode?100*c.children.length+215+"%":"auto",position:"relative"}),c.usingCSS&&c.settings.easing?h.css("-"+c.cssPrefix+"-transition-timing-function",c.settings.easing):c.settings.easing||(c.settings.easing="swing");f();c.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),c.viewport.parent().css({maxWidth:u()}),c.settings.pager||c.viewport.parent().css({margin:"0 auto 0px"}),c.children.css({float:"horizontal"==c.settings.mode?"left":"none",listStyle:"none",position:"relative"}),c.children.css("width",p()),"horizontal"==c.settings.mode&&0<c.settings.slideMargin&&c.children.css("marginRight",c.settings.slideMargin),"vertical"==c.settings.mode&&0<c.settings.slideMargin&&c.children.css("marginBottom",c.settings.slideMargin),"fade"==c.settings.mode&&(c.children.css({position:"absolute",zIndex:0,display:"none"}),c.children.eq(c.settings.startSlide).css({zIndex:c.settings.slideZIndex,display:"block"})),c.controls.el=j('<div class="bx-controls" />'),c.settings.captions&&y(),c.active.last=c.settings.startSlide==g()-1,c.settings.video&&h.fitVids();var e=c.children.eq(c.settings.startSlide);"all"==c.settings.preloadImages&&(e=c.children),c.settings.ticker?c.settings.pager=!1:(c.settings.pager&&w(),c.settings.controls&&x(),c.settings.auto&&c.settings.autoControls&&S(),(c.settings.controls||c.settings.autoControls||c.settings.pager)&&c.viewport.after(c.controls.el)),r(e,l)},r=function(e,t){var i=e.find("img, iframe").length;if(0!=i){var s=0;e.find("img, iframe").each(function(){j(this).one("load",function(){++s==i&&t()}).each(function(){this.complete&&j(this).load()})})}else t()},l=function(){if(c.settings.infiniteLoop&&"fade"!=c.settings.mode&&!c.settings.ticker){var e="vertical"==c.settings.mode?c.settings.minSlides:c.settings.maxSlides,t=c.children.slice(0,e).clone().addClass("bx-clone"),i=c.children.slice(-e).clone().addClass("bx-clone");h.append(t).prepend(i)}c.loader.remove(),m(),"vertical"==c.settings.mode&&(c.settings.adaptiveHeight=!0),c.viewport.height(d()),h.redrawSlider(),c.settings.onSliderLoad(c.active.index),c.initialized=!0,c.settings.responsive&&j(window).bind("resize",F),c.settings.auto&&c.settings.autoStart&&(1<g()||c.settings.autoSlideForOnePage)&&A(),c.settings.ticker&&D(),c.settings.pager&&_(c.settings.startSlide),c.settings.controls&&z(),c.settings.touchEnabled&&!c.settings.ticker&&L()},d=function(){var t=0,e=j();if("vertical"==c.settings.mode||c.settings.adaptiveHeight)if(c.carousel){var s=1==c.settings.moveSlides?c.active.index:c.active.index*v();for(e=c.children.eq(s),i=1;i<=c.settings.maxSlides-1;i++)e=s+i>=c.children.length?e.add(c.children.eq(i-1)):e.add(c.children.eq(s+i))}else e=c.children.eq(c.active.index);else e=c.children;return"vertical"==c.settings.mode?(e.each(function(e){t+=j(this).outerHeight()}),0<c.settings.slideMargin&&(t+=c.settings.slideMargin*(c.settings.minSlides-1))):t=Math.max.apply(Math,e.map(function(){return j(this).outerHeight(!1)}).get()),"border-box"==c.viewport.css("box-sizing")?t+=parseFloat(c.viewport.css("padding-top"))+parseFloat(c.viewport.css("padding-bottom"))+parseFloat(c.viewport.css("border-top-width"))+parseFloat(c.viewport.css("border-bottom-width")):"padding-box"==c.viewport.css("box-sizing")&&(t+=parseFloat(c.viewport.css("padding-top"))+parseFloat(c.viewport.css("padding-bottom"))),t},u=function(){var e="100%";return 0<c.settings.slideWidth&&(e="horizontal"==c.settings.mode?c.settings.maxSlides*c.settings.slideWidth+(c.settings.maxSlides-1)*c.settings.slideMargin:c.settings.slideWidth),e},p=function(){var e=c.settings.slideWidth,t=c.viewport.width();return 0==c.settings.slideWidth||c.settings.slideWidth>t&&!c.carousel||"vertical"==c.settings.mode?e=t:1<c.settings.maxSlides&&"horizontal"==c.settings.mode&&(t>c.maxThreshold||t<c.minThreshold&&(e=(t-c.settings.slideMargin*(c.settings.minSlides-1))/c.settings.minSlides)),e},f=function(){var e=1;if("horizontal"==c.settings.mode&&0<c.settings.slideWidth)if(c.viewport.width()<c.minThreshold)e=c.settings.minSlides;else if(c.viewport.width()>c.maxThreshold)e=c.settings.maxSlides;else{var t=c.children.first().width()+c.settings.slideMargin;e=Math.floor((c.viewport.width()+c.settings.slideMargin)/t)}else"vertical"==c.settings.mode&&(e=c.settings.minSlides);return e},g=function(){var e=0;if(0<c.settings.moveSlides)if(c.settings.infiniteLoop)e=Math.ceil(c.children.length/v());else for(var t=0,i=0;t<c.children.length;)++e,t=i+f(),i+=c.settings.moveSlides<=f()?c.settings.moveSlides:f();else e=Math.ceil(c.children.length/f());return e},v=function(){return 0<c.settings.moveSlides&&c.settings.moveSlides<=f()?c.settings.moveSlides:f()},m=function(){if(c.children.length>c.settings.maxSlides&&c.active.last&&!c.settings.infiniteLoop){if("horizontal"==c.settings.mode){var e=c.children.last(),t=e.position();b(-(t.left-(c.viewport.width()-e.outerWidth())),"reset",0)}else if("vertical"==c.settings.mode){var i=c.children.length-c.settings.minSlides;t=c.children.eq(i).position();b(-t.top,"reset",0)}}else{t=c.children.eq(c.active.index*v()).position();c.active.index==g()-1&&(c.active.last=!0),null!=t&&("horizontal"==c.settings.mode?b(-t.left,"reset",0):"vertical"==c.settings.mode&&b(-t.top,"reset",0))}},b=function(e,t,i,s){if(c.usingCSS){var n="vertical"==c.settings.mode?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)";h.css("-"+c.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"==t?(h.css(c.animProp,n),h.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){h.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),O()})):"reset"==t?h.css(c.animProp,n):"ticker"==t&&(h.css("-"+c.cssPrefix+"-transition-timing-function","linear"),h.css(c.animProp,n),h.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){h.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),b(s.resetValue,"reset",0),M()}))}else{var o={};o[c.animProp]=e,"slide"==t?h.animate(o,i,c.settings.easing,function(){O()}):"reset"==t?h.css(c.animProp,e):"ticker"==t&&h.animate(o,speed,"linear",function(){b(s.resetValue,"reset",0),M()})}},w=function(){c.settings.pagerCustom?c.pagerEl=j(c.settings.pagerCustom):(c.pagerEl=j('<div class="bx-pager" />'),c.settings.pagerSelector?j(c.settings.pagerSelector).html(c.pagerEl):c.controls.el.addClass("bx-has-pager").append(c.pagerEl),e()),c.pagerEl.on("click","a",E)},x=function(){c.controls.next=j('<a class="bx-next" href="">'+c.settings.nextText+"</a>"),c.controls.prev=j('<a class="bx-prev" href="">'+c.settings.prevText+"</a>"),c.controls.next.bind("click",C),c.controls.prev.bind("click",k),c.settings.nextSelector&&j(c.settings.nextSelector).append(c.controls.next),c.settings.prevSelector&&j(c.settings.prevSelector).append(c.controls.prev),c.settings.nextSelector||c.settings.prevSelector||(c.controls.directionEl=j('<div class="bx-controls-direction" />'),c.controls.directionEl.append(c.controls.prev).append(c.controls.next),c.controls.el.addClass("bx-has-controls-direction").append(c.controls.directionEl))},S=function(){c.controls.start=j('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+c.settings.startText+"</a></div>"),c.controls.stop=j('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+c.settings.stopText+"</a></div>"),c.controls.autoEl=j('<div class="bx-controls-auto" />'),c.controls.autoEl.on("click",".bx-start",T),c.controls.autoEl.on("click",".bx-stop",I),c.settings.autoControlsCombine?c.controls.autoEl.append(c.controls.start):c.controls.autoEl.append(c.controls.start).append(c.controls.stop),c.settings.autoControlsSelector?j(c.settings.autoControlsSelector).html(c.controls.autoEl):c.controls.el.addClass("bx-has-controls-auto").append(c.controls.autoEl),P(c.settings.autoStart?"stop":"start")},y=function(){c.children.each(function(e){var t=j(this).find("img:first").attr("title");null!=t&&(""+t).length&&j(this).append('<div class="bx-caption"><span>'+t+"</span></div>")})},C=function(e){c.settings.auto&&h.stopAuto(),h.goToNextSlide(),e.preventDefault()},k=function(e){c.settings.auto&&h.stopAuto(),h.goToPrevSlide(),e.preventDefault()},T=function(e){h.startAuto(),e.preventDefault()},I=function(e){h.stopAuto(),e.preventDefault()},E=function(e){c.settings.auto&&h.stopAuto();var t=j(e.currentTarget);if(void 0!==t.attr("data-slide-index")){var i=parseInt(t.attr("data-slide-index"));i!=c.active.index&&h.goToSlide(i),e.preventDefault()}},_=function(i){var e=c.children.length;if("short"==c.settings.pagerType)return 1<c.settings.maxSlides&&(e=Math.ceil(c.children.length/c.settings.maxSlides)),void c.pagerEl.html(i+1+c.settings.pagerShortSeparator+e);c.pagerEl.find("a").removeClass("active"),c.pagerEl.each(function(e,t){j(t).find("a").eq(i).addClass("active")})},O=function(){if(c.settings.infiniteLoop){var e="";0==c.active.index?e=c.children.eq(0).position():c.active.index==g()-1&&c.carousel?e=c.children.eq((g()-1)*v()).position():c.active.index==c.children.length-1&&(e=c.children.eq(c.children.length-1).position()),e&&("horizontal"==c.settings.mode?b(-e.left,"reset",0):"vertical"==c.settings.mode&&b(-e.top,"reset",0))}c.working=!1,c.settings.onSlideAfter(c.children.eq(c.active.index),c.oldIndex,c.active.index)},P=function(e){c.settings.autoControlsCombine?c.controls.autoEl.html(c.controls[e]):(c.controls.autoEl.find("a").removeClass("active"),c.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active"))},z=function(){1==g()?(c.controls.prev.addClass("disabled"),c.controls.next.addClass("disabled")):!c.settings.infiniteLoop&&c.settings.hideControlOnEnd&&(0==c.active.index?(c.controls.prev.addClass("disabled"),c.controls.next.removeClass("disabled")):c.active.index==g()-1?(c.controls.next.addClass("disabled"),c.controls.prev.removeClass("disabled")):(c.controls.prev.removeClass("disabled"),c.controls.next.removeClass("disabled")))},A=function(){if(0<c.settings.autoDelay)setTimeout(h.startAuto,c.settings.autoDelay);else h.startAuto();c.settings.autoHover&&h.hover(function(){c.interval&&(h.stopAuto(!0),c.autoPaused=!0)},function(){c.autoPaused&&(h.startAuto(!0),c.autoPaused=null)})},D=function(){var e=0;if("next"==c.settings.autoDirection)h.append(c.children.clone().addClass("bx-clone"));else{h.prepend(c.children.clone().addClass("bx-clone"));var t=c.children.first().position();e="horizontal"==c.settings.mode?-t.left:-t.top}b(e,"reset",0),c.settings.pager=!1,c.settings.controls=!1,c.settings.autoControls=!1,c.settings.tickerHover&&!c.usingCSS&&c.viewport.hover(function(){h.stop()},function(){var t=0;c.children.each(function(e){t+="horizontal"==c.settings.mode?j(this).outerWidth(!0):j(this).outerHeight(!0)});var e=c.settings.speed/t,i="horizontal"==c.settings.mode?"left":"top",s=e*(t-Math.abs(parseInt(h.css(i))));M(s)}),M()},M=function(e){speed=e||c.settings.speed;var t={left:0,top:0},i={left:0,top:0};"next"==c.settings.autoDirection?t=h.find(".bx-clone").first().position():i=c.children.first().position();var s="horizontal"==c.settings.mode?-t.left:-t.top,n="horizontal"==c.settings.mode?-i.left:-i.top;b(s,"ticker",speed,{resetValue:n})},L=function(){c.touch={start:{x:0,y:0},end:{x:0,y:0}},c.viewport.bind("touchstart",H)},H=function(e){if(c.working)e.preventDefault();else{c.touch.originalPos=h.position();var t=e.originalEvent;c.touch.start.x=t.changedTouches[0].pageX,c.touch.start.y=t.changedTouches[0].pageY,c.viewport.bind("touchmove",R),c.viewport.bind("touchend",N)}},R=function(e){var t=e.originalEvent,i=Math.abs(t.changedTouches[0].pageX-c.touch.start.x),s=Math.abs(t.changedTouches[0].pageY-c.touch.start.y);if(s<3*i&&c.settings.preventDefaultSwipeX?e.preventDefault():i<3*s&&c.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!=c.settings.mode&&c.settings.oneToOneTouch){var n=0;if("horizontal"==c.settings.mode){var o=t.changedTouches[0].pageX-c.touch.start.x;n=c.touch.originalPos.left+o}else{o=t.changedTouches[0].pageY-c.touch.start.y;n=c.touch.originalPos.top+o}b(n,"reset",0)}},N=function(e){c.viewport.unbind("touchmove",R);var t=e.originalEvent,i=0;if(c.touch.end.x=t.changedTouches[0].pageX,c.touch.end.y=t.changedTouches[0].pageY,"fade"==c.settings.mode){(s=Math.abs(c.touch.start.x-c.touch.end.x))>=c.settings.swipeThreshold&&(c.touch.start.x>c.touch.end.x?h.goToNextSlide():h.goToPrevSlide(),h.stopAuto())}else{var s=0;i="horizontal"==c.settings.mode?(s=c.touch.end.x-c.touch.start.x,c.touch.originalPos.left):(s=c.touch.end.y-c.touch.start.y,c.touch.originalPos.top),!c.settings.infiniteLoop&&(0==c.active.index&&0<s||c.active.last&&s<0)?b(i,"reset",200):Math.abs(s)>=c.settings.swipeThreshold?(s<0?h.goToNextSlide():h.goToPrevSlide(),h.stopAuto()):b(i,"reset",200)}c.viewport.unbind("touchend",N)},F=function(e){if(c.initialized){var t=j(window).width(),i=j(window).height();n==t&&o==i||(n=t,o=i,h.redrawSlider(),c.settings.onSliderResize.call(h,c.active.index))}};return h.goToSlide=function(e,t){if(!c.working&&c.active.index!=e)if(c.working=!0,c.oldIndex=c.active.index,e<0?c.active.index=g()-1:e>=g()?c.active.index=0:c.active.index=e,c.settings.onSlideBefore(c.children.eq(c.active.index),c.oldIndex,c.active.index),"next"==t?c.settings.onSlideNext(c.children.eq(c.active.index),c.oldIndex,c.active.index):"prev"==t&&c.settings.onSlidePrev(c.children.eq(c.active.index),c.oldIndex,c.active.index),c.active.last=c.active.index>=g()-1,c.settings.pager&&_(c.active.index),c.settings.controls&&z(),"fade"==c.settings.mode)c.settings.adaptiveHeight&&c.viewport.height()!=d()&&c.viewport.animate({height:d()},c.settings.adaptiveHeightSpeed),c.children.filter(":visible").fadeOut(c.settings.speed).css({zIndex:0}),c.children.eq(c.active.index).css("zIndex",c.settings.slideZIndex+1).fadeIn(c.settings.speed,function(){j(this).css("zIndex",c.settings.slideZIndex),O()});else{c.settings.adaptiveHeight&&c.viewport.height()!=d()&&c.viewport.animate({height:d()},c.settings.adaptiveHeightSpeed);var i=0,s={left:0,top:0};if(!c.settings.infiniteLoop&&c.carousel&&c.active.last)if("horizontal"==c.settings.mode){s=(o=c.children.eq(c.children.length-1)).position(),i=c.viewport.width()-o.outerWidth()}else{var n=c.children.length-c.settings.minSlides;s=c.children.eq(n).position()}else if(c.carousel&&c.active.last&&"prev"==t){var o,a=1==c.settings.moveSlides?c.settings.maxSlides-v():(g()-1)*v()-(c.children.length-c.settings.maxSlides);s=(o=h.children(".bx-clone").eq(a)).position()}else if("next"==t&&0==c.active.index)s=h.find("> .bx-clone").eq(c.settings.maxSlides).position(),c.active.last=!1;else if(0<=e){var r=e*v();s=c.children.eq(r).position()}if(void 0!==s){var l="horizontal"==c.settings.mode?-(s.left-i):-s.top;b(l,"slide",c.settings.speed)}}},h.goToNextSlide=function(){if(c.settings.infiniteLoop||!c.active.last){var e=parseInt(c.active.index)+1;h.goToSlide(e,"next")}},h.goToPrevSlide=function(){if(c.settings.infiniteLoop||0!=c.active.index){var e=parseInt(c.active.index)-1;h.goToSlide(e,"prev")}},h.startAuto=function(e){c.interval||(c.interval=setInterval(function(){"next"==c.settings.autoDirection?h.goToNextSlide():h.goToPrevSlide()},c.settings.pause),c.settings.autoControls&&1!=e&&P("stop"))},h.stopAuto=function(e){c.interval&&(clearInterval(c.interval),c.interval=null,c.settings.autoControls&&1!=e&&P("start"))},h.getCurrentSlide=function(){return c.active.index},h.getCurrentSlideElement=function(){return c.children.eq(c.active.index)},h.getSlideCount=function(){return c.children.length},h.redrawSlider=function(){c.children.add(h.find(".bx-clone")).width(p()),c.viewport.css("height",d()),c.settings.ticker||m(),c.active.last&&(c.active.index=g()-1),c.active.index>=g()&&(c.active.last=!0),c.settings.pager&&!c.settings.pagerCustom&&(e(),_(c.active.index))},h.destroySlider=function(){c.initialized&&(c.initialized=!1,j(".bx-clone",this).remove(),c.children.each(function(){null!=j(this).data("origStyle")?j(this).attr("style",j(this).data("origStyle")):j(this).removeAttr("style")}),null!=j(this).data("origStyle")?this.attr("style",j(this).data("origStyle")):j(this).removeAttr("style"),j(this).unwrap().unwrap(),c.controls.el&&c.controls.el.remove(),c.controls.next&&c.controls.next.remove(),c.controls.prev&&c.controls.prev.remove(),c.pagerEl&&c.settings.controls&&c.pagerEl.remove(),j(".bx-caption",this).remove(),c.controls.autoEl&&c.controls.autoEl.remove(),clearInterval(c.interval),c.settings.responsive&&j(window).unbind("resize",F))},h.reloadSlider=function(e){null!=e&&(t=e),h.destroySlider(),s()},s(),this}}(jQuery);var CB=CB||{};!function(i,e,s){"use strict";var t={init:function(){t.set_event.select2(),t.set_event.click_once_button(),t.set_event.focus_on_select(),t.set_event.force_spmode(),t.set_event.bcs_imp(),t.set_event.set_bxslider(),t.util.select2(),0!==location.hostname.indexOf("admin")&&(t.set_event.fetch_dlsite_account(),t.set_event.toggle_header_menu())}};t.set_event={select2:function(){i(".select2").each(function(){i(this).data("select_2")||i(this).data("select_2",!0).select2({dropdownCssClass:i(this).hasClass("select2-longdrop")?"select2-longdrop":"",minimumResultsForSearch:10})})},click_once_button:function(){i(".button.click-once").one("click",function(){i(this).addClass("disabled").off("click").on("click",function(){return!1})})},force_spmode:function(){i(".force-spmode").on("click",function(){i.removeCookie("pcmode",{path:"/"}),setTimeout(function(){location.reload()},0)})},focus_on_select:function(){i(".focus-on-select").on("click",function(){i(this).select()})},bcs_imp:function(){i(s).on("bcsimp",function(){i('.bcs_viewer[data-ext-callback="bcsimp"]').each(function(){var e=i(this).data("frame"),t=setInterval(function(){"function"==typeof ga&&(clearInterval(t),ga("send","event","banner","imp",e,1))},500);i(this).find("a").on("click",function(){ga("send","event","banner","click",e,1)})})})},set_bxslider:function(){var e,t=i(".mod-slide .work-box-line .work-box").width();i(".bxslider").each(function(){e=i(this).parents(".mod-slide").data("category"),i(this).bxSlider({minSlides:3,maxSlides:20,slideWidth:t,slideMargin:30,prevText:"",nextText:"",prevSelector:'.mod-slide[data-category="'+e+'"] .slide-ctrl.prev',nextSelector:'.mod-slide[data-category="'+e+'"] .slide-ctrl.next',infiniteLoop:!1,hideControlOnEnd:!0,responsive:!0,pager:!1}),i(this).find("img").one("error",function(e){i(this).trigger("load")}),/MSIE/.test(s.navigator.userAgent)&&i(this).find("img").each(function(){i(this).attr("src",i(this).attr("src"))})})},fetch_dlsite_account:function(){var e=0===location.hostname.indexOf("chobit")?"https://login.dlsite.com/api/user/self":"https://login.stg.dlsite.com/api/user/self";i.ajax(e,{xhrFields:{withCredentials:!0}}).then(function(e){e.logged_in?(i("#dlsite-account-id").text(e.logged_in),i(".eisysGroupHeaderAccount").children().first().hide(),i(".eisysGroupHeaderAccount").children().last().show()):(i(".eisysGroupHeaderAccount").children().first().show(),i(".eisysGroupHeaderAccount").children().last().hide())})},toggle_header_menu:function(){i(".eisysGroupLogin-link").on("click",function(e){i(".eisysGroupHeaderAccountBoxOuter").toggleClass("is-active")}),i(document).on("click",function(e){i(e.target).closest(".eisysGroupHeaderAccountBox").length||i(e.target).closest(".eisysGroupLogin-link").length||i(".eisysGroupHeaderAccountBoxOuter").removeClass("is-active")})}},t.controller={pushstate:function(e,t){s.history&&s.history.pushState&&history.pushState(e,null,t)}},t.util={easing:function(){i.extend(i.easing,{easeOutQuint:function(e,t,i,s,n){return s*((t=t/n-1)*t*t*t*t+1)+i}})},select2:function(){s.Select2&&"ja"===i("html").attr("lang")&&i.extend(i.fn.select2.defaults,{formatNoMatches:function(){return"該当なし"},formatInputTooShort:function(e,t){return"後"+(t-e.length)+"文字入れてください"},formatInputTooLong:function(e,t){return"検索文字列が"+(e.length-t)+"文字長すぎます"},formatSelectionTooBig:function(e){return"最多で"+e+"項目までしか選択できません"},formatLoadMore:function(e){return"読込中･･･"},formatSearching:function(){return"検索中･･･"}})}},e.pushstate=t.controller.pushstate,i(function(){t.init()}),t.util.easing()}(jQuery,CB,window),function(t,i,s){"use strict";var n={init:function(){n.controller.background_blur(),n.set_event.choice(),n.set_event.disable_scroll()}};n.set_event={choice:function(){t(".gm-choice.im-over-r18").on("click",function(){n.controller.hide_adult_confirm(300)}),t(".gm-choice.what-is-chobit").on("click",function(){location.href="/guide/howto"}),t(".gm-choice span").on({mouseover:function(){t(".gm-choice").removeClass("hover"),t(this).parent().addClass("hover")},mouseout:function(){t(".gm-choice").removeClass("hover")}})},disable_scroll:function(){1===t(".gm-overlay").length&&t(s).on("mousewheel",function(){return!1}).on("scroll",function(){s.scrollTo(0,0)})}},n.controller={hide_adult_confirm:function(e){t(s).off("mousewheel scroll"),0===e?t(".gm-overlay").remove():(t(".gm-container").transition({filter:"blur(0px)",easing:"ease",duration:e}),t(".gm-overlay").transition({opacity:0,easing:"ease",duration:e})),setTimeout(function(){t(".gm-overlay").remove(),t(".gm-container").removeClass("gm-blur"),t.cookie("showr18",1,{expires:365})},e)},media_play_start:function(){0!==t(".windows .window .video-js").length&&1===t(".windows .window.active .video-js.vjs-ready").length&&videojs(t(".windows .window.active .video-js").attr("id")).play()},background_blur:function(){(s.URL||s.webkitURL)&&t(".gm-overlay").css("background-color","rgba(255, 255, 255, 0.65)")}},i.dlac=function(e){return(!location.pathname||"/adultcheck"!==location.pathname)&&(1===e||"number"==typeof s.dlac&&1===s.dlac?(n.controller.hide_adult_confirm(0),void(i.dlac=null)):void 0)},i.dlac(),n.init()}(jQuery,CB,window),function(s){var n={open_delay:200,mouseout_close_delay:250,timer:null,first_hover:!0,init:function(){s(".lm-logo-menu, .hdr-select-category").on("mouseover",function(e){e.stopPropagation()}),n.controller.preload()}};n.set_event={header_logo:function(){s(".hdr-select-category").on("mouseover",function(){n.controller.hide_menu(),n.timer=setTimeout(function(){s(".lm-logo-menu").addClass("active"),s(".hdr-select-category").addClass("active")},n.open_delay)})},list_head:function(){s(".lm-list-head").on("mouseover",function(){var e=0,t=s(this).data("target"),i=s(this);n.first_hover&&(e=n.open_delay),void 0!==t&&(clearTimeout(n.timer),n.timer=setTimeout(function(){n.first_hover=!1,s(".lm-list-head").removeClass("active"),i.addClass("active"),s(".lm-wide-category").removeClass("active"),s(".lm-logo-menu").addClass("wide"),s(".lm-wide-"+t).addClass("active"),s(".lm-pulldown-wide").on("mouseover",function(){clearTimeout(n.timer)}),n.controller.hide_menu()},e))})},search_category_change:function(){s('[name="f_category"]').on("change",function(){var e=s(this).find("option:selected").attr("data-selection");s(".hdr-searchbar-category span").text(e);var t=s(".hdr-searchbar-category span").outerWidth()+12;s(".hdr-searchbar-category").css("width",t);var i=s(".hdr-searchbar-category").outerWidth();s(".hdr-searchbar-keyword").css("left",i)}),s('[name="f_category"]').triggerHandler("change")},toggle_categorylist:function(){s(".categorylist-subhead").on("click",function(){n.controller.toggle_categorylist.call(this)})}},n.controller={preload:function(){s(".lm-logo-menu .lm-sublist-bg img").each(function(){(new Image).src=s(this).attr("src")})},hide_menu:function(){clearTimeout(n.timer),s("body").off("mouseover").on("mouseover",function(){clearTimeout(n.timer),n.timer=setTimeout(function(){s("body, .lm-pulldown-wide").off("mouseover"),s(".lm-wide-category").removeClass("active"),s(".lm-list-head").removeClass("active"),s(".lm-logo-menu").removeClass("active wide"),s(".hdr-select-category").removeClass("active"),n.first_hover=!0},250)})}},s(function(){n.init(),n.set_event.header_logo(),n.set_event.list_head(),n.set_event.search_category_change()})}(jQuery),function(t){var i={config:{duration:300},init:function(){i.set_event.right_sidebar_toggle(),i.set_event.share_button(),i.set_event.recommend(),i.set_event.push_show_dlsite_link_count(),i.set_event.push_click_dlsite_link_count(),i.controller.file_point()}};i.set_event={right_sidebar_toggle:function(){t(".right-toggle").on("click",function(){i.controller.right_sidebar_toggle()})},share_button:function(){t(".share-button").on("click",function(){return t(this).toggleClass("active"),i.controller.show_share_dialog(),!1})},recommend:function(){var e=t(".player-box:first").data("work-id");i.controller.recommend(e)},push_show_dlsite_link_count:function(){if(0<t(".sidebar-module .work-adbox").length){var e=t(".player-box:first").data("file-relation-id");i.controller.push_ga("showDlsiteLinkAtWorkPage",e)}},push_click_dlsite_link_count:function(){0<t(".sidebar-module .work-adbox").length&&t(".sidebar-module .work-adbox a").on("click",function(){var e=t(".player-box:first").data("file-relation-id");i.controller.push_ga("clickDlsiteLinkAtWorkPage",e)})}},i.controller={file_point:function(){t(".player-box").each(function(){var i=t(this);t.ajax({url:"/service/work/file_point",dataType:"json",data:{file_relation_id:i.data("file-relation-id")}}).done(function(e){var t=String(e.point).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,");i.parents(".trials").find(".file-play-count .play-count").text(t)})})},recommend:function(e){void 0!==e&&""!==e&&t.ajax({url:"/service/work/recommend",dataType:"html",data:{work_id:e}}).done(function(e){t(".module-content.work-recommend").html(e),t(".module-content.work-recommend .work-box:gt(9)").hide(),t(".module-content.work-recommend").append('<div class="show-more">もっと見る</div>'),t(".module-content.work-recommend .show-more").on("click",function(){10<t(".module-content.work-recommend .work-box").length&&i.controller.show_more_recommend()}),t(".module-content.work-recommend").parent().find(".module-head").append('<div class="txt-recommend-work"></div>').show()})},show_share_dialog:function(){t(".share-box").slideToggle("fast")},show_more_recommend:function(){t(".module-content.work-recommend .work-box:gt(9)").show(),t(".module-content.work-recommend .show-more").remove()},push_ga:function(e,t){var i={event:"guideToDlsite",guideAction:e,guideLabel:t};dataLayer.push(i)}},t(function(){0!==t(".work-view").length&&i.init()})}(jQuery),function(l,c,r){"use strict";var h={config:{duration:300},$windows:null,$active:null,work_id:null,init:function(){h.$windows=l(".windows"),h.$active=l(".window.active:eq(0)");var e=l(".work-files").attr("data-work-id");h.work_id=void 0===e?null:e,l("input, textarea, select").each(function(){void 0===l(this).attr("checked")?l(this).prop("checked",!1):l(this).prop("checked",!0)}),setTimeout(function(){h.$windows.height(h.$active.outerHeight()),h.util.select2()},0)}};h.set_event={open_window:function(){l(".file-list, .file-list-like-work").on("click",".window-open a",function(){if(l(this).hasClass("disabled"))return!1;var e=l(this).parent().data("open-to"),t=l(this).parents(".file-list, .file-list-like-work").data("reverse");return void 0!==e&&h.controller.open_window(e,!0,t),!1})},add_window:function(){l(".add-window").on("click",function(){if(l(".file-list .removable").length<1){var e=l(this).attr("data-add-window");void 0!==e&&h.controller.add_window(e)}return!1})},resize_windows:function(){l(r).on("resize",function(){h.$windows.height(h.$active.outerHeight())})},dirty_resize:function(){var e=setInterval(function(){l(r).triggerHandler("resize")},300);setTimeout(function(){clearInterval(e)},3e3)},image_load_resize:function(){l("img.load-resize").on("load",function(){l(r).triggerHandler("resize")})},popstate:function(){l(r).on("popstate",function(e){var t=e.originalEvent.state;null===t&&(t=l(".file-list .window-open:eq(0)").attr("data-open-to")),h.controller.open_window(t,!1)})},remove_upload_file:function(){l(".file-list").on("click",".removable span",function(){h.controller.remove_upload_file.call(this)})}},h.controller={open_window:function(e,t,i){t="boolean"!=typeof t||t;var s=l(".window.active:eq(0)"),n=l(".window-"+e+":eq(0)"),o=l(".windows:eq(0)").width()+150;if(0===s.length||0===n.length||s[0]===n[0]||s.hasClass("animate"))return!1;l(".window-open").removeClass("active").filter('[data-open-to="'+e+'"]').addClass("active");var a=h.util.get_direction(s,n);a=!0===i?"right"===a?1:-1:"right"===a?-1:1,s.addClass("animate").css({left:0,opacity:1}).transition({left:o*a,opacity:0,duration:h.config.duration,easing:"ease"}),n.css({left:o*a*-1,opacity:0}).show().transition({left:0,opacity:1,duration:h.config.duration,easing:"ease"}),setTimeout(function(){s.hide().removeClass("active animate"),n.addClass("active")},h.config.duration),h.$windows.transition({height:n.outerHeight(),duration:h.config.duration,easing:"ease"}),t&&null!==h.work_id&&c.pushstate(e,"/"+h.work_id+"/"+e),l(r).triggerHandler("window_slide"),h.$active=n},add_window:function(e,t){t=void 0===t;var i=l(".template-"+e);if(1!==i.length)return!1;for(var s=i.clone(),n=l(".windows .window").length-2,o=0;o<=n;o++){if(!l(".windows").find('.window[data-file-num="'+o+'"]')[0])break}s.removeClass("template-"+e).addClass("window-file"+o).attr({"data-window-name":"file"+o,"data-file-num":o}),s.find("input, textarea, select").each(function(){var e=l(this).attr("name");void 0!==e&&-1!==e.indexOf("[i]")&&l(this).attr("name",e.replace("[i]","["+o+"]")),void 0===l(this).attr("checked")?l(this).prop("checked",!1):l(this).prop("checked",!0)}),l(".windows .window-file-upload").before(s),h.util.select2();var a=i.attr("data-default-name"),r=l('<li class="window-open removable" data-open-to="file'+o+'" data-upload-num="'+o+'"><a href="#">'+a+"</a></li>");l(".file-list .add").before(r),c.upload.controller.set_remove_button(),c.upload.controller.check_file_counts(),c.filebox&&c.filebox.init(),t&&r.find("a").trigger("click")},remove_upload_file:function(){if(!confirm("この体験版を削除してよろしいですか？"))return!1;var e=l(this).parent().prev(".window-open").attr("data-open-to");h.controller.open_window(e,!1);var t=l(this).parent().attr("data-open-to");l(".windows").find('[data-window-name="'+t+'"]').remove(),l(this).parent().remove(),c.upload.controller.check_file_counts()}},h.util={get_direction:function(e,t){var i=l(".window").index(e),s=l(".window").index(t);return i===s?null:i<s?"right":"left"},resize_windows:function(){h.$windows.height(h.active_outer_height)},select2:function(){l(".windows .window select.slide-select2").select2({minimumResultsForSearch:10})}},l(function(){h.init(),h.set_event.open_window(),h.set_event.add_window(),h.set_event.resize_windows(),h.set_event.popstate(),h.set_event.image_load_resize(),h.set_event.dirty_resize(),h.set_event.remove_upload_file()}),c.slide=h}(jQuery,CB,window);